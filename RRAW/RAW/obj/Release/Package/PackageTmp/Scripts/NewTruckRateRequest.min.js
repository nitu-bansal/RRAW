/// <reference path="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js" />

function btnApprove_onClick() {
    DisplayProgress();
    document.getElementById('lblStatus').innerText = 'Approving rate request...';
    document.getElementById('lblProgressText').innerText = 'Approving rate request...';
}

function btnSave_onClick() {
    DisplayProgress();
    document.getElementById('lblStatus').innerText = 'Saving rate request...';
    document.getElementById('lblProgressText').innerText = 'Saving rate request...';

    var t = setTimeout("progressComplete()", 1000);
}

function btnApproveAsAdhoc_onClick() {
    DisplayProgress();
    document.getElementById('lblStatus').innerText = 'Approving rate request as Adhoc...';
    document.getElementById('lblProgressText').innerText = 'Approving rate request...';
}

function btnTransferToTariff_onClick() {
    DisplayProgress();
    document.getElementById('lblStatus').innerText = 'Transfering rate request to tariff...';
    document.getElementById('lblProgressText').innerText = 'Transfering to Tariff...';
}

function btnSendBackToReviseRate_onClick() {
    DisplayProgress();
    document.getElementById('lblStatus').innerText = 'Sending rate request back to revise rates...';
    document.getElementById('lblProgressText').innerText = 'Rejecting rate request...';
}

function btnPostNewRateRequest_onClick() {
    DisplayProgress();
    document.getElementById('lblStatus').innerText = 'Posting new rate request...';
    document.getElementById('lblProgressText').innerText = 'Posting new rate request...';

    var t = setTimeout("progressComplete()", 1000);
}

function progressComplete() {
    document.getElementById('DivUpdateProgress').style.display = "none";
    document.getElementById('lblStatus').innerText = 'New rate request posted/saved successfully...';
}

function btnRemoveAllComments_onClick() {
    DisplayProgress();
    document.getElementById('lblStatus').innerText = 'Removing comments...';
    document.getElementById('lblProgressText').innerText = 'Removing comments...';
}

function btnPostComment_onClick() {
    try {
        if (document.getElementById('txtComment').innerText != "") {
            DisplayProgress();
            document.getElementById('lblStatus').innerText = 'Posting comment...';
            document.getElementById('lblProgressText').innerText = 'Posting comment...';
            return true;
        }
        else {
            document.getElementById('lblStatus').innerText = 'Please fill up comment box to post comment.';

            if (document.getElementById('txtComment').value != "") {
                DisplayProgress();
                document.getElementById('lblStatus').innerText = 'Posting comment...';
                document.getElementById('lblProgressText').innerText = 'Posting comment...';
                return true;
            }
            else {
                document.getElementById('lblStatus').innerText = 'Please fill up comment box to post comment.';
                document.getElementById('txtComment').focus();
                return false;
            }
        }
    }
    catch (e) {
        document.getElementById('txtComment').focus();
        return false;
    }
}

function btnNeedToReviseRate_onClick() {
    DisplayProgress();
    document.getElementById('lblStatus').innerText = 'Setting up rate request to update details...';
    document.getElementById('lblProgressText').innerText = 'Setting up rate request...';
}

function btnReject_onClick() {
    DisplayProgress();
    document.getElementById('lblStatus').innerText = 'Rejecting rate request...';
    document.getElementById('lblProgressText').innerText = 'Rejecting rate request...';
}

function btnDelete_onClick() {
    var r = confirm('Are you sure you want to delete this rate request?');
    if (r == true) {
        DisplayProgress();
        document.getElementById('lblStatus').innerText = 'Deleting rate request...';
        document.getElementById('lblProgressText').innerText = 'Deleting rate request...';

        return true;
    }
    else {
        return false;
    }
}

function DisplayProgress() {
    document.getElementById('DivUpdateProgress').style.display = "inline";
}
/*-------------------------------------------------------------------------*/


//Parsing...
function trim(data) {
    if (data.length > 0) {
        return data.replace(/^\s*|\s*$/g, '');
    } else {
        return "";
    }
}
function setValue(id, value) {
    document.getElementById(id).value = value;
}

function lookupForFile(controlNumber) {
    //document.getElementById('fUpload_' + controlNumber).click();
    $("#fUpload_" + controlNumber)[0].click();
    //$('#<%=fUpload_1.ClientID %>').click();
}

function attachFile(controlNumber) {
    if (!document.all) {
        var l = document.getElementById('fUpload_' + controlNumber).files.length;
        if (l > 0) {
            document.getElementById('linkAttachFile_' + controlNumber).innerHTML = document.getElementById('fUpload_' + controlNumber).files[0].name + " (" + Math.round((document.getElementById('fUpload_' + controlNumber).files[0].size / 1024)) + "KB)";
            $('#chkAttachment_' + controlNumber).show();
            $('#chkAttachment_' + controlNumber).prop("checked", true);
            $('#divAttachment_' + (controlNumber + 1)).show();
        }
    }
}

$(document).ready(function () {
    $("#txtRateValidDate").width($("#cmbRateValidFor").width()-1);
    if (document.all) {
        $("#chkAttachment_1").hide();
    }
    else {
        $("#chkAttachment_1").hide();
        $("#chkAttachment_2").hide();
        $("#chkAttachment_3").hide();
        $("#chkAttachment_4").hide();
        $("#chkAttachment_5").hide();
        $("#divAttachmentControls").css("position", "fixed");
        $("#divAttachmentControls").css("top", "-100px");
        $("#divAttachment_1").show();
    }

    var d = new Date();
    $("#lblRequestDate").text("Date: " + ((d.getMonth() + 1) < 10 ? "0" : "") + (d.getMonth() + 1) + "/" + (d.getDate() < 10 ? "0" : "") + d.getDate() + "/" + d.getFullYear());

    try {
        locate(this.offsetTop, 'raterequestslink', 'truckraterequestlink')
    }
    catch (e) {
    };
    top.document.getElementById('processing_image').style.display = 'none';
    function f() {
        return ((d.getMonth() + 1) + '/' + d.getDate() + '/' + d.getFullYear() + ' ' + d.getHours() + ':' + d.getMinutes() + ':' + d.getSeconds())
    };
    $("hidCurrentDateTime").val(f());
    try {
        $("txtShipDate").focus();
        $("txtHAWBNumber").focus();
    }
    catch (e) {
    }
});

$("#divAddMoreCharges").click(function () {
    var contentsToAppend = "<tr><td><input type='text' id='Text1' style='width: 98%; text-align: left'/></td><td><select id='cmbDocType5' name='D7'><option>Select</option><option>1 Tone</option><option>2 Tone</option><option>3 Tone</option><option>5 Tone</option><option>10 Tone</option><option>Other Tonnage</option></select></td><td><input type='text' id='' /></td><td><input type='text' id='' /></td><td><input type='text' id='' /></td></tr>";

    $("#tblRates").append(contentsToAppend);

    moveDivToBottom('PanelNewRateRequest', 300);
});

function moveDivToBottom(divId, minValue) {
    var objDiv = document.getElementById(divId);
    if (objDiv.scrollTop < (minValue + (objDiv.scrollHeight - 992))) {
        objDiv.scrollTop = minValue + (objDiv.scrollHeight - 992);
    }
}

$("select").live({
    change: function () {
        if ($(this).val() == "Other Tonnage") {
            var txtBox = "<input type='text' style='width:131px; text-align:left' />";
            $(this).replaceWith(txtBox);
        }
    }
});
